name: run-exported-file
on:
  workflow_dispatch:        # manual button
jobs:
  extract:
    runs-on: macos-14       # Apple‑silicon (M‑series) VM :contentReference[oaicite:2]{index=2}
    steps:
    - uses: actions/checkout@v4
    - name: Make binary executable
      run: chmod +x ci/ExportedFile
    - name: Run extractor
      run: |
        mkdir -p output
        date -u +%s > start.txt
        ./ci/ExportedFile
        find . -type f -newer start.txt -exec mv {} output/ \;
    - name: Zip results
      run: cd output && zip -r ../payload.zip .
    - name: Upload artifact
      uses: actions/upload-artifact@v4
      with:
        name: extracted-payload
        path: payload.zip
        retention-days: 7

